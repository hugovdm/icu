# ICU 66

[TOC]

ICU is the [premier library for software
internationalization](http://site.icu-project.org/#TOC-What-is-ICU-), used by a
[wide array of companies and organizations](../home/index.md).

## Release Overview

ICU 66 updates to [Unicode
13](http://blog.unicode.org/2020/03/announcing-unicode-standard-version-130.html),
including new characters, scripts, emoji, and corresponding API constants. It
also updates to [CLDR
36.1](http://cldr.unicode.org/index/downloads/cldr-36#TOC-CLDR-36.1) with
Unicode 13 updates and bug fixes.

These new, extra Q1 releases are for integration by vendors that could not
otherwise release their products with the newest version of Unicode. These are
low-impact releases with no other significant feature additions or
implementation changes. The next feature releases will be CLDR 37 and ICU 67,
scheduled for 2020 April.

> The intermediate ICU 66==*preview*== (2019-dec) updated to Unicode 13
> ==*beta*==, including new characters, scripts, emoji, and corresponding API
> constants. It also updated to CLDR 36.1preview with Unicode 13 updates and bug
> fixes.

> Between the preview and the release candidate/final release there are no API
> changes, and no significant code changes. There were some changes in Unicode
> 13 data as a result of beta feedback.

For more details, including migration issues, see below.

Please use the [icu-support mailing list](../contacts.md) and/or [find/submit
error reports](../bugs.md).

[List of tickets fixed in ICU
66](https://unicode-org.atlassian.net/issues/?jql=project%20%3D%20ICU%20AND%20status%20%3D%20Done%20AND%20resolution%20in%20(Fixed%2C%20%22Fixed%20by%20Other%20Ticket%22)%20AND%20fixVersion%20%3D%2066.1%20ORDER%20BY%20component%20ASC%2C%20created%20DESC)

## Version Number

The preview had library version number 66.0.1.

The initial release has library version number 66.1.

If there are maintenance releases, they will be 66.2, 66.3, etc.

Note: There may be additional commits on the
[maint-66](https://github.com/unicode-org/icu/tree/maint/maint-66) branch that
are not included in the prepackaged download files.

## Common Changes

*   [Unicode
    13](http://blog.unicode.org/2020/03/announcing-unicode-standard-version-130.html)
    ([ICU-20893](https://unicode-org.atlassian.net/browse/ICU-20893))
    *   Total of 5930 new characters
    *   4 new scripts
    *   55 new emoji characters, plus additional new sequences
    *   New CJK extension, first characters in plane 3: U+30000..U+3134A
*   [CLDR 36.1](http://cldr.unicode.org/index/downloads/cldr-36#TOC-CLDR-36.1)
    *   Unicode 13 root collation data and Chinese data for collation and
        transliteration

## ICU4C Specific Changes

*   Fix uses of u8"literals" broken by C++20 introduction of incompatible
    char8_t type.
    ([ICU-20972](https://unicode-org.atlassian.net/browse/ICU-20972))

## ICU4J Specific Changes

*   None

## Known Issues

### Common Issues

*   None yet.

### ICU4C (same as for ICU 65)

*   ICU4C requires C++11 support. Some platforms (such as IBM AIX, IBM z and
    Solaris) may no longer be able to build ICU until an improved compiler is
    available. See the "ICU4C Platform Support" section below.
*   ICU4C has build errors on Cygwin 3.0.0, please use the previous version of
    Cygwin 2.11.2 as a work-around
    ([ICU-20435](https://unicode-org.atlassian.net/browse/ICU-20435)).
*   ICU4C has known issues compiling with GCC on AIX. These are still being
    investigated ([ICU-3752](https://unicode-org.atlassian.net/browse/ICU-3752))

### ICU4J

*   None yet.

## Migration Issues (same as for ICU 65)

1.  Function-like ICU4C API macros (e.g., U16_NEXT_OR_FFFD()) were always
    intended to be used with a trailing semicolon, but some macros were usable
    without semicolon, and when used with one caused -Wextra-semi-stmt warnings.
    This has been fixed. Please adjust call sites, adding missing semicolons. If
    you have a lot of such call sites, then you can temporarily change the
    definition of UPRV_BLOCK_MACRO_BEGIN and UPRV_BLOCK_MACRO_END in
    unicode/umachine.h.
    ([ICU-20601](https://unicode-org.atlassian.net/browse/ICU-20601),
    [icu/pull/759](https://github.com/unicode-org/icu/pull/759))
2.  Some C++ functions now return covariant (same-as-this) pointer types.
    ([ICU-20783](https://unicode-org.atlassian.net/browse/ICU-20783))
    1.  Under the following conditions, this may break the definition of custom
        subclasses:
        1.  You have a subclass of an ICU class that itself is a subclass of a
            class that defines virtual clone().
        2.  For example: MyBreakIterator → RuleBasedBreakIterator →
            BreakIterator
        3.  Note that RuleBasedBreakIterator::clone() now returns a pointer to
            RuleBasedBreakIterator not to BreakIterator.
        4.  Your subclass (MyBreakIterator) defines clone() as returning a
            pointer to the base class (BreakIterator).
        5.  This will no longer compile because the subclass clone returns a
            type that is not covariant (i.e., a type that is wider) than the
            type returned by clone in the immediate parent class
            (RuleBasedBreakIterator).
    2.  To fix this, please change your subclass to return a pointer to the
        immediate parent (RuleBasedBreakIterator) or to itself
        (MyBreakIterator).
3.  All of the public C++ headers now assume a default context of extern "C++".
    ([ICU-20530](https://unicode-org.atlassian.net/browse/ICU-20530))
    1.  ICU4C has both C and C++ headers, for callers using either a C or C++
        compiler, or for callers using a C++ compiler who wish to have binary
        compatibility. The C++ headers were previously inconsistent in terms of
        the linkage context they assumed the caller to be using them with. In
        some cases the C++ headers would work in an extern "C" context and in
        other cases they would not. As of ICU 65, all of the public C++ headers
        now assume a default context of extern "C++".
    2.  This means that callers including C++ headers inside an extern "C" block
        will need to modify their code to move the included header outside of
        the extern "C" block.

    All of the public C++ headers are guarded with the macro
    "U_SHOW_CPLUSPLUS_API".
    ([ICU-20578](https://unicode-org.atlassian.net/browse/ICU-20578))
    This macro is set to 1 by default if "__cplusplus" is defined, but it can be
    defined by users of ICU to be 0 before including any headers if they wish to
    only use the C APIs (with a C++ compiler).

    ICU4C on Windows no longer uses a fixed base address for the library DLLs.
    ([ICU-20768](https://unicode-org.atlassian.net/browse/ICU-20768))

## ICU4C Platform Support

*   All: Compiler support for C++11 is required for building the ICU libraries.
    *   GCC: version 4.8 and later has been tested.
*   IBM AIX:
    *   xlC C/C++ does not currently support a sufficient subset of C++11
        (#[13393](https://ssl.icu-project.org/trac/ticket/13393))
    *   gcc might work
*   macOS: XCode 8.3 (LLVM clang 8.1.0) has been tested.
*   Solaris
    *   Use [Oracle Developer Studio 12.5 or
        later](https://blogs.oracle.com//solaris/entry/oracle_developer_studio_12_5)
    *   May not be supported.
        (#[13393](https://ssl.icu-project.org/trac/ticket/13393))
    *   Unicode issues with some test files
        ([#13096](http://bugs.icu-project.org/trac/ticket/13096)) (tests are not
        able to build)
    *   Time zone detection errors
        ([#13097](http://bugs.icu-project.org/trac/ticket/13097))
*   Windows:
    *   The minimum supported version is Windows 7. Windows XP and Windows Vista
        are no longer supported.
    *   Building the Visual Studio UWP projects requires [Visual Studio
        2017](https://www.visualstudio.com/downloads/) with a version of the
        [Windows 10 SDK](https://developer.microsoft.com/windows/downloads)
        installed.
    *   When using "@compat=host", on versions below Windows 10 version 1703, 6
        locales have date and number formatting issues
        ([#13119](https://unicode-org.atlassian.net/browse/ICU-13119)).
    *   The LCID conversion APIs don't round-trip Kurdish (ku) and Central
        Kurdish (ckb) due to Windows not having a ckb locale
        ([#20181](https://unicode-org.atlassian.net/browse/ICU-20181)).
*   Windows using the ICC compiler:
    *   Source File Encoding. The ICC compiler does not recognize the
        [/utf-8](https://software.intel.com/en-us/forums/intel-c-compiler/topic/733662)
        option. A work-around is known and reported to succeed.
        ([#13251](http://bugs.icu-project.org/trac/ticket/13251))
*   IBM z
    *   xlC C/C++ does not currently support a sufficient subset of C++11
        (#[13393](https://ssl.icu-project.org/trac/ticket/13393))

## ICU4J Platform Support

ICU4J works on Java 7 and on Android API level 21.

## ICU4C Download

**Library version number:** 66.1
**Release date:** 2020-03-11

*   [API Changes since ICU4C
    65](https://htmlpreview.github.io/?https://github.com/unicode-org/icu/blob/maint/maint-66/icu4c/APIChangeReport.html)
*   [Readme](https://htmlpreview.github.io/?https://github.com/unicode-org/icu/blob/maint/maint-66/icu4c/readme.html)

Source and binary downloads are available on the git/GitHub tag page:
<https://github.com/unicode-org/icu/releases/tag/release-66-1>

See the [Source Code Access](../index.md) page for how to download the ICU file
tree directly from GitHub.

**ICU locale data was generated from CLDR tag `release-36-1`**

## ICU4J Download

**Library version number:** 66.1

**Release date:** 2020-03-11

*   [API Changes since ICU4J
    65](https://htmlpreview.github.io/?https://github.com/unicode-org/icu/blob/maint/maint-66/icu4j/APIChangeReport.html)
*   [Readme](https://htmlpreview.github.io/?https://github.com/unicode-org/icu/blob/maint/maint-66/icu4j/readme.html)

**Source and binary downloads are available on the git/GitHub tag page:**
<https://github.com/unicode-org/icu/releases/tag/release-66-1>

See the [Source Code Access](../index.md) page for how to download the ICU file
tree directly from GitHub.

Maven dependency:

```none
<dependency>
  <groupId>com.ibm.icu</groupId>
  <artifactId>icu4j</artifactId>
  <version>66.1</version>
</dependency>
```
